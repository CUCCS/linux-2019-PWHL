sudo: required

language: sh

before_install:
   - sudo apt-get update -q
   - export scversion="stable" # or "v0.4.7", or "latest"
   - wget "https://storage.googleapis.com/shellcheck/shellcheck-${scversion}.linux.x86_64.tar.xz"
   - tar --xz -xvf shellcheck-"${scversion}".linux.x86_64.tar.xz
   - sudo cp shellcheck-"${scversion}"/shellcheck /usr/bin/
   - /usr/bin/shellcheck --version 
   - sudo apt-get install imagemagick
   - sudo apt-get install build-essential curl git m4 ruby texinfo libbz2-dev libcurl4-openssl-dev libexpat-dev libncurses-dev zlib1g-dev
   - sudo apt-get install bc
   - apt-get install p7zip
   - wget "http://sec.cuc.edu.cn/huangwei/course/LinuxSysAdmin/exp/chap0x04/web_log.tsv.7z"
   - wget "http://sec.cuc.edu.cn/huangwei/course/LinuxSysAdmin/exp/chap0x04/worldcupplayerinfo.tsv"
   - 7z x web_log.tsv.7z

script:
  - bash test.sh
  - bash 实验四/image.sh -d  实验四/test_image -c

  - bash 实验四/image.sh -d 实验四/test_image -r 700x700
  - bash 实验四/image.sh -d 实验四/test_image -q 70
  - bash 实验四/image.sh -d 实验四/test_image -w "I am watermark"
  - bash 实验四/image.sh -d 实验四/test_image --prefix abc
  - bash 实验四/image.sh -d 实验四/test_image --postfix ijk
  - bash 实验四/image.sh -d 实验四/test_image -r 700x700 --prefix abd --postfix ijk
  - bash 实验四/Web.sh -h
  - bash 实验四/Web.sh -i
  - bash 实验四/Web.sh -u
  - bash 实验四/Web.sh -c
  - bash 实验四/Web.sh -e
  - bash 实验四/Web.sh -s /ksc.html
  - bash 实验四/worldcupplayer.sh

after_script:
  - /usr/bin/shellcheck test.sh

after_failure:
  - id
  - pwd
  - df -h
  - cat error.log

notifications:
  email:
    on_success: never
